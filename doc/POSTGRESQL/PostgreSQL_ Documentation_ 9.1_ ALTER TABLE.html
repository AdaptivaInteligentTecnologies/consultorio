<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0061)http://www.postgresql.org/docs/9.1/static/sql-altertable.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>PostgreSQL: Documentation: 9.1: ALTER TABLE</title>
    <style type="text/css" media="screen" title="Normal Text">@import url("/dyncss/docs.css?a06d7ca6");</style>
    <script type="text/javascript" async="" src="./PostgreSQL_ Documentation_ 9.1_ ALTER TABLE_files/ga.js"></script><script type="text/javascript" src="./PostgreSQL_ Documentation_ 9.1_ ALTER TABLE_files/monospacefix.js"></script></head><body><pre id="monotest" style="display: none;">&nbsp;</pre><p id="paratest" style="display: none;">&nbsp;</p><style type="text/css" media="screen">#docContainer tt, #docContainer pre, #docContainer code{font-size: 1.3em;}</style>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1345454-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<div id="docHeader">
	<div id="docHeaderLogo">
		<a href="http://www.postgresql.org/" title="PostgreSQL"><img src="./PostgreSQL_ Documentation_ 9.1_ ALTER TABLE_files/hdr_logo.png" width="206" height="80" alt="PostgreSQL"></a>
	</div>
</div>

<div id="docContainerWrap">
<div id="docContainer">
<div id="docNavSearchContainer">
<div id="docSearch">
	<form action="http://www.postgresql.org/search/" method="get">
	<div>
	<input type="hidden" name="u" value="/docs/9.1/">
	<label for="q">Search Documentation:&nbsp;</label><input type="text" id="q" name="q" size="20" onfocus="if( this.value==this.defaultValue ) this.value=&#39;&#39;;" value="Search"><input id="submit" type="submit" value="Search">
	</div>
	</form>
</div>
<div id="docNav">
<a href="http://www.postgresql.org/" title="Home">Home</a> → <a href="http://www.postgresql.org/docs" title="Documentation">Documentation</a> → <a href="http://www.postgresql.org/docs/manuals" title="Manuals">Manuals</a> → <a href="http://www.postgresql.org/docs/9.1/static/index.html">PostgreSQL 9.1</a>
</div>
<div id="docVersions">
This page in other versions:


	
	
	<a href="http://www.postgresql.org/docs/9.0/static/sql-altertable.html" title="This page in version 9.0">9.0</a>
	

	/
	
	<b>9.1</b>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.2/static/sql-altertable.html" title="This page in version 9.2">9.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.3/static/sql-altertable.html" title="This page in version 9.3">9.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/9.4/static/sql-altertable.html" title="This page in version 9.4">9.4</a>
	




&nbsp;|&nbsp; Development versions:

	
	
	<a href="http://www.postgresql.org/docs/devel/static/sql-altertable.html" title="This page in version devel" rel="nofollow">devel</a>
	




&nbsp;|&nbsp; Unsupported versions:

	
	
	<a href="http://www.postgresql.org/docs/7.1/static/sql-altertable.html" title="This page in version 7.1" rel="nofollow">7.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.2/static/sql-altertable.html" title="This page in version 7.2" rel="nofollow">7.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.3/static/sql-altertable.html" title="This page in version 7.3" rel="nofollow">7.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/7.4/static/sql-altertable.html" title="This page in version 7.4" rel="nofollow">7.4</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.0/static/sql-altertable.html" title="This page in version 8.0" rel="nofollow">8.0</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.1/static/sql-altertable.html" title="This page in version 8.1" rel="nofollow">8.1</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.2/static/sql-altertable.html" title="This page in version 8.2" rel="nofollow">8.2</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.3/static/sql-altertable.html" title="This page in version 8.3" rel="nofollow">8.3</a>
	

	/
	
	<a href="http://www.postgresql.org/docs/8.4/static/sql-altertable.html" title="This page in version 8.4" rel="nofollow">8.4</a>
	


</div>
</div>

<div id="docContent">
<div class="NAVHEADER">
  <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <th colspan="5" align="center" valign="bottom"><a href="http://www.postgresql.org/docs/9.1/static/index.html">PostgreSQL 9.1.15 Documentation</a></th>
    </tr>

    <tr>
      <td width="10%" align="left" valign="top"><a title="ALTER SERVER" href="http://www.postgresql.org/docs/9.1/static/sql-alterserver.html" accesskey="P">Prev</a></td>

      <td width="10%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.1/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="60%" align="center" valign="bottom"></td>

      <td width="20%" align="right" valign="top"><a title="ALTER TABLESPACE" href="http://www.postgresql.org/docs/9.1/static/sql-altertablespace.html" accesskey="N">Next</a></td>
    </tr>
  </tbody></table>
  <hr class="c1" width="100%">
</div>

<h1><a name="SQL-ALTERTABLE" id="SQL-ALTERTABLE"></a>ALTER
TABLE</h1>

<div class="REFNAMEDIV">
  <a name="AEN62022" id="AEN62022"></a>

  <h2>Name</h2>ALTER TABLE&nbsp;--&nbsp;change the definition of a
  table
</div>

<div class="REFSYNOPSISDIV">
  <a name="AEN62027" id="AEN62027"></a>

  <h2>Synopsis</h2>
  <pre class="SYNOPSIS">ALTER TABLE [ ONLY ] <tt class="REPLACEABLE c2">name</tt> [ * ]
    <tt class="REPLACEABLE c2">action</tt> [, ... ]
ALTER TABLE [ ONLY ] <tt class="REPLACEABLE c2">name</tt> [ * ]
    RENAME [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> TO <tt class="REPLACEABLE c2">new_column</tt>
ALTER TABLE <tt class="REPLACEABLE c2">name</tt>
    RENAME TO <tt class="REPLACEABLE c2">new_name</tt>
ALTER TABLE <tt class="REPLACEABLE c2">name</tt>
    SET SCHEMA <tt class="REPLACEABLE c2">new_schema</tt>

<span class="phrase PHRASE">where <tt class="REPLACEABLE c2">action</tt> is one of:</span>

    ADD [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> <tt class="REPLACEABLE c2">data_type</tt> [ COLLATE <tt class="REPLACEABLE c2">collation</tt> ] [ <tt class="REPLACEABLE c2">column_constraint</tt> [ ... ] ]
    DROP [ COLUMN ] [ IF EXISTS ] <tt class="REPLACEABLE c2">column</tt> [ RESTRICT | CASCADE ]
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> [ SET DATA ] TYPE <tt class="REPLACEABLE c2">data_type</tt> [ COLLATE <tt class="REPLACEABLE c2">collation</tt> ] [ USING <tt class="REPLACEABLE c2">expression</tt> ]
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> SET DEFAULT <tt class="REPLACEABLE c2">expression</tt>
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> DROP DEFAULT
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> { SET | DROP } NOT NULL
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> SET STATISTICS <tt class="REPLACEABLE c2">integer</tt>
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> SET ( <tt class="REPLACEABLE c2">attribute_option</tt> = <tt class="REPLACEABLE c2">value</tt> [, ... ] )
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> RESET ( <tt class="REPLACEABLE c2">attribute_option</tt> [, ... ] )
    ALTER [ COLUMN ] <tt class="REPLACEABLE c2">column</tt> SET STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN }
    ADD <tt class="REPLACEABLE c2">table_constraint</tt> [ NOT VALID ]
    ADD <tt class="REPLACEABLE c2">table_constraint_using_index</tt>
    VALIDATE CONSTRAINT <tt class="REPLACEABLE c2">constraint_name</tt>
    DROP CONSTRAINT [ IF EXISTS ]  <tt class="REPLACEABLE c2">constraint_name</tt> [ RESTRICT | CASCADE ]
    DISABLE TRIGGER [ <tt class="REPLACEABLE c2">trigger_name</tt> | ALL | USER ]
    ENABLE TRIGGER [ <tt class="REPLACEABLE c2">trigger_name</tt> | ALL | USER ]
    ENABLE REPLICA TRIGGER <tt class="REPLACEABLE c2">trigger_name</tt>
    ENABLE ALWAYS TRIGGER <tt class="REPLACEABLE c2">trigger_name</tt>
    DISABLE RULE <tt class="REPLACEABLE c2">rewrite_rule_name</tt>
    ENABLE RULE <tt class="REPLACEABLE c2">rewrite_rule_name</tt>
    ENABLE REPLICA RULE <tt class="REPLACEABLE c2">rewrite_rule_name</tt>
    ENABLE ALWAYS RULE <tt class="REPLACEABLE c2">rewrite_rule_name</tt>
    CLUSTER ON <tt class="REPLACEABLE c2">index_name</tt>
    SET WITHOUT CLUSTER
    SET WITH OIDS
    SET WITHOUT OIDS
    SET ( <tt class="REPLACEABLE c2">storage_parameter</tt> = <tt class="REPLACEABLE c2">value</tt> [, ... ] )
    RESET ( <tt class="REPLACEABLE c2">storage_parameter</tt> [, ... ] )
    INHERIT <tt class="REPLACEABLE c2">parent_table</tt>
    NO INHERIT <tt class="REPLACEABLE c2">parent_table</tt>
    OF <tt class="REPLACEABLE c2">type_name</tt>
    NOT OF
    OWNER TO <tt class="REPLACEABLE c2">new_owner</tt>
    SET TABLESPACE <tt class="REPLACEABLE c2">new_tablespace</tt>

<span class="phrase PHRASE">and <tt class="REPLACEABLE c2">table_constraint_using_index</tt> is:</span>

    [ CONSTRAINT <tt class="REPLACEABLE c2">constraint_name</tt> ]
    { UNIQUE | PRIMARY KEY } USING INDEX <tt class="REPLACEABLE c2">index_name</tt>
    [ DEFERRABLE | NOT DEFERRABLE ] [ INITIALLY DEFERRED | INITIALLY IMMEDIATE ]
</pre>
</div>

<div class="REFSECT1">
  <a name="AEN62086" id="AEN62086"></a>

  <h2>Description</h2>

  <p><tt class="COMMAND">ALTER TABLE</tt> changes the definition of
  an existing table. There are several subforms:</p>

  <div class="VARIABLELIST">
    <dl>
      <dt><tt class="LITERAL">ADD COLUMN</tt></dt>

      <dd>
        <p>This form adds a new column to the table, using the same
        syntax as <a href="http://www.postgresql.org/docs/9.1/static/sql-createtable.html">CREATE
        TABLE</a>.</p>
      </dd>

      <dt><tt class="LITERAL">DROP COLUMN [ IF EXISTS ]</tt></dt>

      <dd>
        <p>This form drops a column from a table. Indexes and table
        constraints involving the column will be automatically
        dropped as well. You will need to say <tt class="LITERAL">CASCADE</tt> if anything outside the table
        depends on the column, for example, foreign key references
        or views. If <tt class="LITERAL">IF EXISTS</tt> is
        specified and the column does not exist, no error is
        thrown. In this case a notice is issued instead.</p>
      </dd>

      <dt><tt class="LITERAL">SET DATA TYPE</tt></dt>

      <dd>
        <p>This form changes the type of a column of a table.
        Indexes and simple table constraints involving the column
        will be automatically converted to use the new column type
        by reparsing the originally supplied expression. The
        optional <tt class="LITERAL">COLLATE</tt> clause specifies
        a collation for the new column; if omitted, the collation
        is the default for the new column type. The optional
        <tt class="LITERAL">USING</tt> clause specifies how to
        compute the new column value from the old; if omitted, the
        default conversion is the same as an assignment cast from
        old data type to new. A <tt class="LITERAL">USING</tt>
        clause must be provided if there is no implicit or
        assignment cast from old to new type.</p>
      </dd>

      <dt><tt class="LITERAL">SET</tt>/<tt class="LITERAL">DROP
      DEFAULT</tt></dt>

      <dd>
        <p>These forms set or remove the default value for a
        column. The default values only apply to subsequent
        <tt class="COMMAND">INSERT</tt> commands; they do not cause
        rows already in the table to change. Defaults can also be
        created for views, in which case they are inserted into
        <tt class="COMMAND">INSERT</tt> statements on the view
        before the view's <tt class="LITERAL">ON INSERT</tt> rule
        is applied.</p>
      </dd>

      <dt><tt class="LITERAL">SET</tt>/<tt class="LITERAL">DROP NOT
      NULL</tt></dt>

      <dd>
        <p>These forms change whether a column is marked to allow
        null values or to reject null values. You can only use
        <tt class="LITERAL">SET NOT NULL</tt> when the column
        contains no null values.</p>
      </dd>

      <dt><tt class="LITERAL">SET STATISTICS</tt></dt>

      <dd>
        <p>This form sets the per-column statistics-gathering
        target for subsequent <a href="http://www.postgresql.org/docs/9.1/static/sql-analyze.html">ANALYZE</a> operations. The target can
        be set in the range 0 to 10000; alternatively, set it to -1
        to revert to using the system default statistics target
        (<a href="http://www.postgresql.org/docs/9.1/static/runtime-config-query.html#GUC-DEFAULT-STATISTICS-TARGET">default_statistics_target</a>).
        For more information on the use of statistics by the
        <span class="PRODUCTNAME">PostgreSQL</span> query planner,
        refer to <a href="http://www.postgresql.org/docs/9.1/static/planner-stats.html">Section 14.2</a>.</p>
      </dd>

      <dt><tt class="LITERAL">SET ( <tt class="REPLACEABLE c2">attribute_option</tt> = <tt class="REPLACEABLE c2">value</tt> [, ... ] )</tt><br>
      <tt class="LITERAL">RESET ( <tt class="REPLACEABLE c2">attribute_option</tt> [, ... ] )</tt></dt>

      <dd>
        <p>This form sets or resets per-attribute options.
        Currently, the only defined per-attribute options are
        <tt class="LITERAL">n_distinct</tt> and <tt class="LITERAL">n_distinct_inherited</tt>, which override the
        number-of-distinct-values estimates made by subsequent
        <a href="http://www.postgresql.org/docs/9.1/static/sql-analyze.html">ANALYZE</a> operations.
        <tt class="LITERAL">n_distinct</tt> affects the statistics
        for the table itself, while <tt class="LITERAL">n_distinct_inherited</tt> affects the statistics
        gathered for the table plus its inheritance children. When
        set to a positive value, <tt class="COMMAND">ANALYZE</tt>
        will assume that the column contains exactly the specified
        number of distinct nonnull values. When set to a negative
        value, which must be greater than or equal to -1,
        <tt class="COMMAND">ANALYZE</tt> will assume that the
        number of distinct nonnull values in the column is linear
        in the size of the table; the exact count is to be computed
        by multiplying the estimated table size by the absolute
        value of the given number. For example, a value of -1
        implies that all values in the column are distinct, while a
        value of -0.5 implies that each value appears twice on the
        average. This can be useful when the size of the table
        changes over time, since the multiplication by the number
        of rows in the table is not performed until query planning
        time. Specify a value of 0 to revert to estimating the
        number of distinct values normally. For more information on
        the use of statistics by the <span class="PRODUCTNAME">PostgreSQL</span> query planner, refer to
        <a href="http://www.postgresql.org/docs/9.1/static/planner-stats.html">Section 14.2</a>.</p>
      </dd>

      <dt><tt class="LITERAL">SET STORAGE</tt></dt>

      <dd>
        <p>This form sets the storage mode for a column. This
        controls whether this column is held inline or in a
        secondary <acronym class="ACRONYM">TOAST</acronym> table,
        and whether the data should be compressed or not.
        <tt class="LITERAL">PLAIN</tt> must be used for
        fixed-length values such as <tt class="TYPE">integer</tt>
        and is inline, uncompressed. <tt class="LITERAL">MAIN</tt>
        is for inline, compressible data. <tt class="LITERAL">EXTERNAL</tt> is for external, uncompressed data,
        and <tt class="LITERAL">EXTENDED</tt> is for external,
        compressed data. <tt class="LITERAL">EXTENDED</tt> is the
        default for most data types that support non-<tt class="LITERAL">PLAIN</tt> storage. Use of <tt class="LITERAL">EXTERNAL</tt> will make substring operations on
        very large <tt class="TYPE">text</tt> and <tt class="TYPE">bytea</tt> values run faster, at the penalty of
        increased storage space. Note that <tt class="LITERAL">SET
        STORAGE</tt> doesn't itself change anything in the table,
        it just sets the strategy to be pursued during future table
        updates. See <a href="http://www.postgresql.org/docs/9.1/static/storage-toast.html">Section 55.2</a>
        for more information.</p>
      </dd>

      <dt><tt class="LITERAL">ADD <tt class="REPLACEABLE c2">table_constraint</tt> [ NOT VALID
      ]</tt></dt>

      <dd>
        <p>This form adds a new constraint to a table using the
        same syntax as <a href="http://www.postgresql.org/docs/9.1/static/sql-createtable.html">CREATE
        TABLE</a>, plus the option <tt class="LITERAL">NOT
        VALID</tt>, which is currently only allowed for foreign key
        constraints. If the constraint is marked <tt class="LITERAL">NOT VALID</tt>, the potentially-lengthy initial
        check to verify that all rows in the table satisfy the
        constraint is skipped. The constraint will still be
        enforced against subsequent inserts or updates (that is,
        they'll fail unless there is a matching row in the
        referenced table). But the database will not assume that
        the constraint holds for all rows in the table, until it is
        validated by using the <tt class="LITERAL">VALIDATE
        CONSTRAINT</tt> option.</p>
      </dd>

      <dt><tt class="LITERAL">ADD <tt class="REPLACEABLE c2">table_constraint_using_index</tt></tt></dt>

      <dd>
        <p>This form adds a new <tt class="LITERAL">PRIMARY
        KEY</tt> or <tt class="LITERAL">UNIQUE</tt> constraint to a
        table based on an existing unique index. All the columns of
        the index will be included in the constraint.</p>

        <p>The index cannot have expression columns nor be a
        partial index. Also, it must be a b-tree index with default
        sort ordering. These restrictions ensure that the index is
        equivalent to one that would be built by a regular
        <tt class="LITERAL">ADD PRIMARY KEY</tt> or <tt class="LITERAL">ADD UNIQUE</tt> command.</p>

        <p>If <tt class="LITERAL">PRIMARY KEY</tt> is specified,
        and the index's columns are not already marked <tt class="LITERAL">NOT NULL</tt>, then this command will attempt to
        do <tt class="LITERAL">ALTER COLUMN SET NOT NULL</tt>
        against each such column. That requires a full table scan
        to verify the column(s) contain no nulls. In all other
        cases, this is a fast operation.</p>

        <p>If a constraint name is provided then the index will be
        renamed to match the constraint name. Otherwise the
        constraint will be named the same as the index.</p>

        <p>After this command is executed, the index is
        <span class="QUOTE">"owned"</span> by the constraint, in
        the same way as if the index had been built by a regular
        <tt class="LITERAL">ADD PRIMARY KEY</tt> or <tt class="LITERAL">ADD UNIQUE</tt> command. In particular, dropping
        the constraint will make the index disappear too.</p>

        <div class="NOTE">
          <blockquote class="NOTE">
            <p><b>Note:</b> Adding a constraint using an existing
            index can be helpful in situations where a new
            constraint needs to be added without blocking table
            updates for a long time. To do that, create the index
            using <tt class="COMMAND">CREATE INDEX
            CONCURRENTLY</tt>, and then install it as an official
            constraint using this syntax. See the example
            below.</p>
          </blockquote>
        </div>
      </dd>

      <dt><tt class="LITERAL">VALIDATE CONSTRAINT</tt></dt>

      <dd>
        <p>This form validates a foreign key constraint that was
        previously created as <tt class="LITERAL">NOT VALID</tt>,
        by scanning the table to ensure there are no unmatched
        rows. Nothing happens if the constraint is already marked
        valid.</p>

        <p>Validation can be a long process on larger tables and
        currently requires an <tt class="LITERAL">ACCESS
        EXCLUSIVE</tt> lock. The value of separating validation
        from initial creation is that you can defer validation to
        less busy times, or can be used to give additional time to
        correct pre-existing errors while preventing new
        errors.</p>
      </dd>

      <dt><tt class="LITERAL">DROP CONSTRAINT [ IF EXISTS
      ]</tt></dt>

      <dd>
        <p>This form drops the specified constraint on a table. If
        <tt class="LITERAL">IF EXISTS</tt> is specified and the
        constraint does not exist, no error is thrown. In this case
        a notice is issued instead.</p>
      </dd>

      <dt><tt class="LITERAL">DISABLE</tt>/<tt class="LITERAL">ENABLE [ REPLICA | ALWAYS ] TRIGGER</tt></dt>

      <dd>
        <p>These forms configure the firing of trigger(s) belonging
        to the table. A disabled trigger is still known to the
        system, but is not executed when its triggering event
        occurs. For a deferred trigger, the enable status is
        checked when the event occurs, not when the trigger
        function is actually executed. One can disable or enable a
        single trigger specified by name, or all triggers on the
        table, or only user triggers (this option excludes
        internally generated constraint triggers such as those that
        are used to implement foreign key constraints or deferrable
        uniqueness and exclusion constraints). Disabling or
        enabling internally generated constraint triggers requires
        superuser privileges; it should be done with caution since
        of course the integrity of the constraint cannot be
        guaranteed if the triggers are not executed. The trigger
        firing mechanism is also affected by the configuration
        variable <a href="http://www.postgresql.org/docs/9.1/static/runtime-config-client.html#GUC-SESSION-REPLICATION-ROLE">session_replication_role</a>.
        Simply enabled triggers will fire when the replication role
        is <span class="QUOTE">"origin"</span> (the default) or
        <span class="QUOTE">"local"</span>. Triggers configured as
        <tt class="LITERAL">ENABLE REPLICA</tt> will only fire if
        the session is in <span class="QUOTE">"replica"</span>
        mode, and triggers configured as <tt class="LITERAL">ENABLE
        ALWAYS</tt> will fire regardless of the current replication
        mode.</p>
      </dd>

      <dt><tt class="LITERAL">DISABLE</tt>/<tt class="LITERAL">ENABLE [ REPLICA | ALWAYS ] RULE</tt></dt>

      <dd>
        <p>These forms configure the firing of rewrite rules
        belonging to the table. A disabled rule is still known to
        the system, but is not applied during query rewriting. The
        semantics are as for disabled/enabled triggers. This
        configuration is ignored for <tt class="LITERAL">ON
        SELECT</tt> rules, which are always applied in order to
        keep views working even if the current session is in a
        non-default replication role.</p>
      </dd>

      <dt><tt class="LITERAL">CLUSTER</tt></dt>

      <dd>
        <p>This form selects the default index for future <a href="http://www.postgresql.org/docs/9.1/static/sql-cluster.html">CLUSTER</a> operations. It does not
        actually re-cluster the table.</p>
      </dd>

      <dt><tt class="LITERAL">SET WITHOUT CLUSTER</tt></dt>

      <dd>
        <p>This form removes the most recently used <a href="http://www.postgresql.org/docs/9.1/static/sql-cluster.html">CLUSTER</a> index specification from the
        table. This affects future cluster operations that don't
        specify an index.</p>
      </dd>

      <dt><tt class="LITERAL">SET WITH OIDS</tt></dt>

      <dd>
        <p>This form adds an <tt class="LITERAL">oid</tt> system
        column to the table (see <a href="http://www.postgresql.org/docs/9.1/static/ddl-system-columns.html">Section 5.4</a>). It does nothing
        if the table already has OIDs.</p>

        <p>Note that this is not equivalent to <tt class="LITERAL">ADD COLUMN oid oid</tt>; that would add a normal
        column that happened to be named <tt class="LITERAL">oid</tt>, not a system column.</p>
      </dd>

      <dt><tt class="LITERAL">SET WITHOUT OIDS</tt></dt>

      <dd>
        <p>This form removes the <tt class="LITERAL">oid</tt>
        system column from the table. This is exactly equivalent to
        <tt class="LITERAL">DROP COLUMN oid RESTRICT</tt>, except
        that it will not complain if there is already no <tt class="LITERAL">oid</tt> column.</p>
      </dd>

      <dt><tt class="LITERAL">SET ( <tt class="REPLACEABLE c2">storage_parameter</tt> = <tt class="REPLACEABLE c2">value</tt> [, ... ] )</tt></dt>

      <dd>
        <p>This form changes one or more storage parameters for the
        table. See <a class="c3" href="http://www.postgresql.org/docs/9.1/static/sql-createtable.html#SQL-CREATETABLE-STORAGE-PARAMETERS">Storage
        Parameters</a> for details on the available parameters.
        Note that the table contents will not be modified
        immediately by this command; depending on the parameter you
        might need to rewrite the table to get the desired effects.
        That can be done with <a href="http://www.postgresql.org/docs/9.1/static/sql-vacuum.html">VACUUM
        FULL</a>, <a href="http://www.postgresql.org/docs/9.1/static/sql-cluster.html">CLUSTER</a> or one of
        the forms of <tt class="COMMAND">ALTER TABLE</tt> that
        forces a table rewrite.</p>

        <div class="NOTE">
          <blockquote class="NOTE">
            <p><b>Note:</b> While <tt class="COMMAND">CREATE
            TABLE</tt> allows <tt class="LITERAL">OIDS</tt> to be
            specified in the <tt class="LITERAL">WITH (<tt class="REPLACEABLE c2">storage_parameter</tt>)</tt> syntax,
            <tt class="COMMAND">ALTER TABLE</tt> does not treat
            <tt class="LITERAL">OIDS</tt> as a storage parameter.
            Instead use the <tt class="LITERAL">SET WITH OIDS</tt>
            and <tt class="LITERAL">SET WITHOUT OIDS</tt> forms to
            change OID status.</p>
          </blockquote>
        </div>
      </dd>

      <dt><tt class="LITERAL">RESET ( <tt class="REPLACEABLE c2">storage_parameter</tt> [, ... ] )</tt></dt>

      <dd>
        <p>This form resets one or more storage parameters to their
        defaults. As with <tt class="LITERAL">SET</tt>, a table
        rewrite might be needed to update the table entirely.</p>
      </dd>

      <dt><tt class="LITERAL">INHERIT <tt class="REPLACEABLE c2">parent_table</tt></tt></dt>

      <dd>
        <p>This form adds the target table as a new child of the
        specified parent table. Subsequently, queries against the
        parent will include records of the target table. To be
        added as a child, the target table must already contain all
        the same columns as the parent (it could have additional
        columns, too). The columns must have matching data types,
        and if they have <tt class="LITERAL">NOT NULL</tt>
        constraints in the parent then they must also have
        <tt class="LITERAL">NOT NULL</tt> constraints in the
        child.</p>

        <p>There must also be matching child-table constraints for
        all <tt class="LITERAL">CHECK</tt> constraints of the
        parent. Currently <tt class="LITERAL">UNIQUE</tt>,
        <tt class="LITERAL">PRIMARY KEY</tt>, and <tt class="LITERAL">FOREIGN KEY</tt> constraints are not considered,
        but this might change in the future.</p>
      </dd>

      <dt><tt class="LITERAL">NO INHERIT <tt class="REPLACEABLE c2">parent_table</tt></tt></dt>

      <dd>
        <p>This form removes the target table from the list of
        children of the specified parent table. Queries against the
        parent table will no longer include records drawn from the
        target table.</p>
      </dd>

      <dt><tt class="LITERAL">OF <tt class="REPLACEABLE c2">type_name</tt></tt></dt>

      <dd>
        <p>This form links the table to a composite type as though
        <tt class="COMMAND">CREATE TABLE OF</tt> had formed it. The
        table's list of column names and types must precisely match
        that of the composite type; the presence of an <tt class="LITERAL">oid</tt> system column is permitted to differ.
        The table must not inherit from any other table. These
        restrictions ensure that <tt class="COMMAND">CREATE TABLE
        OF</tt> would permit an equivalent table definition.</p>
      </dd>

      <dt><tt class="LITERAL">NOT OF</tt></dt>

      <dd>
        <p>This form dissociates a typed table from its type.</p>
      </dd>

      <dt><tt class="LITERAL">OWNER</tt></dt>

      <dd>
        <p>This form changes the owner of the table, sequence, or
        view to the specified user.</p>
      </dd>

      <dt><tt class="LITERAL">SET TABLESPACE</tt></dt>

      <dd>
        <p>This form changes the table's tablespace to the
        specified tablespace and moves the data file(s) associated
        with the table to the new tablespace. Indexes on the table,
        if any, are not moved; but they can be moved separately
        with additional <tt class="LITERAL">SET TABLESPACE</tt>
        commands. See also <a href="http://www.postgresql.org/docs/9.1/static/sql-createtablespace.html">CREATE TABLESPACE</a>.</p>
      </dd>

      <dt><tt class="LITERAL">RENAME</tt></dt>

      <dd>
        <p>The <tt class="LITERAL">RENAME</tt> forms change the
        name of a table (or an index, sequence, or view) or the
        name of an individual column in a table. There is no effect
        on the stored data.</p>
      </dd>

      <dt><tt class="LITERAL">SET SCHEMA</tt></dt>

      <dd>
        <p>This form moves the table into another schema.
        Associated indexes, constraints, and sequences owned by
        table columns are moved as well.</p>
      </dd>
    </dl>
  </div>

  <p>All the actions except <tt class="LITERAL">RENAME</tt> and
  <tt class="LITERAL">SET SCHEMA</tt> can be combined into a list
  of multiple alterations to apply in parallel. For example, it is
  possible to add several columns and/or alter the type of several
  columns in a single command. This is particularly useful with
  large tables, since only one pass over the table need be
  made.</p>

  <p>You must own the table to use <tt class="COMMAND">ALTER
  TABLE</tt>. To change the schema of a table, you must also have
  <tt class="LITERAL">CREATE</tt> privilege on the new schema. To
  add the table as a new child of a parent table, you must own the
  parent table as well. To alter the owner, you must also be a
  direct or indirect member of the new owning role, and that role
  must have <tt class="LITERAL">CREATE</tt> privilege on the
  table's schema. (These restrictions enforce that altering the
  owner doesn't do anything you couldn't do by dropping and
  recreating the table. However, a superuser can alter ownership of
  any table anyway.)</p>
</div>

<div class="REFSECT1">
  <a name="AEN62364" id="AEN62364"></a>

  <h2>Parameters</h2>

  <div class="VARIABLELIST">
    <dl>
      <dt><tt class="REPLACEABLE c2">name</tt></dt>

      <dd>
        <p>The name (optionally schema-qualified) of an existing
        table to alter. If <tt class="LITERAL">ONLY</tt> is
        specified before the table name, only that table is
        altered. If <tt class="LITERAL">ONLY</tt> is not specified,
        the table and all its descendant tables (if any) are
        altered. Optionally, <tt class="LITERAL">*</tt> can be
        specified after the table name to explicitly indicate that
        descendant tables are included.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">column</tt></dt>

      <dd>
        <p>Name of a new or existing column.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">new_column</tt></dt>

      <dd>
        <p>New name for an existing column.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">new_name</tt></dt>

      <dd>
        <p>New name for the table.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">type</tt></dt>

      <dd>
        <p>Data type of the new column, or new data type for an
        existing column.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">table_constraint</tt></dt>

      <dd>
        <p>New table constraint for the table.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">constraint_name</tt></dt>

      <dd>
        <p>Name of an existing constraint to drop.</p>
      </dd>

      <dt><tt class="LITERAL">CASCADE</tt></dt>

      <dd>
        <p>Automatically drop objects that depend on the dropped
        column or constraint (for example, views referencing the
        column).</p>
      </dd>

      <dt><tt class="LITERAL">RESTRICT</tt></dt>

      <dd>
        <p>Refuse to drop the column or constraint if there are any
        dependent objects. This is the default behavior.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">trigger_name</tt></dt>

      <dd>
        <p>Name of a single trigger to disable or enable.</p>
      </dd>

      <dt><tt class="LITERAL">ALL</tt></dt>

      <dd>
        <p>Disable or enable all triggers belonging to the table.
        (This requires superuser privilege if any of the triggers
        are internally generated constraint triggers such as those
        that are used to implement foreign key constraints or
        deferrable uniqueness and exclusion constraints.)</p>
      </dd>

      <dt><tt class="LITERAL">USER</tt></dt>

      <dd>
        <p>Disable or enable all triggers belonging to the table
        except for internally generated constraint triggers such as
        those that are used to implement foreign key constraints or
        deferrable uniqueness and exclusion constraints.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">index_name</tt></dt>

      <dd>
        <p>The index name on which the table should be marked for
        clustering.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">storage_parameter</tt></dt>

      <dd>
        <p>The name of a table storage parameter.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">value</tt></dt>

      <dd>
        <p>The new value for a table storage parameter. This might
        be a number or a word depending on the parameter.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">parent_table</tt></dt>

      <dd>
        <p>A parent table to associate or de-associate with this
        table.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">new_owner</tt></dt>

      <dd>
        <p>The user name of the new owner of the table.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">new_tablespace</tt></dt>

      <dd>
        <p>The name of the tablespace to which the table will be
        moved.</p>
      </dd>

      <dt><tt class="REPLACEABLE c2">new_schema</tt></dt>

      <dd>
        <p>The name of the schema to which the table will be
        moved.</p>
      </dd>
    </dl>
  </div>
</div>

<div class="REFSECT1">
  <a name="AEN62465" id="AEN62465"></a>

  <h2>Notes</h2>

  <p>The key word <tt class="LITERAL">COLUMN</tt> is noise and can
  be omitted.</p>

  <p>When a column is added with <tt class="LITERAL">ADD
  COLUMN</tt>, all existing rows in the table are initialized with
  the column's default value (NULL if no <tt class="LITERAL">DEFAULT</tt> clause is specified).</p>

  <p>Adding a column with a non-null default or changing the type
  of an existing column will require the entire table and indexes
  to be rewritten. As an exception, if the <tt class="LITERAL">USING</tt> clause does not change the column contents
  and the old type is either binary coercible to the new type or an
  unconstrained domain over the new type, a table rewrite is not
  needed, but any indexes on the affected columns must still be
  rebuilt. Adding or removing a system <tt class="LITERAL">oid</tt>
  column also requires rewriting the entire table. Table and/or
  index rebuilds may take a significant amount of time for a large
  table; and will temporarily require as much as double the disk
  space.</p>

  <p>Adding a <tt class="LITERAL">CHECK</tt> or <tt class="LITERAL">NOT NULL</tt> constraint requires scanning the table to
  verify that existing rows meet the constraint.</p>

  <p>The main reason for providing the option to specify multiple
  changes in a single <tt class="COMMAND">ALTER TABLE</tt> is that
  multiple table scans or rewrites can thereby be combined into a
  single pass over the table.</p>

  <p>The <tt class="LITERAL">DROP COLUMN</tt> form does not
  physically remove the column, but simply makes it invisible to
  SQL operations. Subsequent insert and update operations in the
  table will store a null value for the column. Thus, dropping a
  column is quick but it will not immediately reduce the on-disk
  size of your table, as the space occupied by the dropped column
  is not reclaimed. The space will be reclaimed over time as
  existing rows are updated. (These statements do not apply when
  dropping the system <tt class="LITERAL">oid</tt> column; that is
  done with an immediate rewrite.)</p>

  <p>To force an immediate rewrite of the table, you can use
  <a href="http://www.postgresql.org/docs/9.1/static/sql-vacuum.html">VACUUM FULL</a>, <a href="http://www.postgresql.org/docs/9.1/static/sql-cluster.html">CLUSTER</a> or one of the forms of ALTER TABLE
  that forces a rewrite. This results in no semantically-visible
  change in the table, but gets rid of no-longer-useful data.</p>

  <p>The <tt class="LITERAL">USING</tt> option of <tt class="LITERAL">SET DATA TYPE</tt> can actually specify any expression
  involving the old values of the row; that is, it can refer to
  other columns as well as the one being converted. This allows
  very general conversions to be done with the <tt class="LITERAL">SET DATA TYPE</tt> syntax. Because of this flexibility,
  the <tt class="LITERAL">USING</tt> expression is not applied to
  the column's default value (if any); the result might not be a
  constant expression as required for a default. This means that
  when there is no implicit or assignment cast from old to new
  type, <tt class="LITERAL">SET DATA TYPE</tt> might fail to
  convert the default even though a <tt class="LITERAL">USING</tt>
  clause is supplied. In such cases, drop the default with
  <tt class="LITERAL">DROP DEFAULT</tt>, perform the <tt class="LITERAL">ALTER TYPE</tt>, and then use <tt class="LITERAL">SET
  DEFAULT</tt> to add a suitable new default. Similar
  considerations apply to indexes and constraints involving the
  column.</p>

  <p>If a table has any descendant tables, it is not permitted to
  add, rename, or change the type of a column in the parent table
  without doing the same to the descendants. That is, <tt class="COMMAND">ALTER TABLE ONLY</tt> will be rejected. This ensures
  that the descendants always have columns matching the parent.</p>

  <p>A recursive <tt class="LITERAL">DROP COLUMN</tt> operation
  will remove a descendant table's column only if the descendant
  does not inherit that column from any other parents and never had
  an independent definition of the column. A nonrecursive
  <tt class="LITERAL">DROP COLUMN</tt> (i.e., <tt class="COMMAND">ALTER TABLE ONLY ... DROP COLUMN</tt>) never removes
  any descendant columns, but instead marks them as independently
  defined rather than inherited.</p>

  <p>The <tt class="LITERAL">TRIGGER</tt>, <tt class="LITERAL">CLUSTER</tt>, <tt class="LITERAL">OWNER</tt>, and
  <tt class="LITERAL">TABLESPACE</tt> actions never recurse to
  descendant tables; that is, they always act as though <tt class="LITERAL">ONLY</tt> were specified. Adding a constraint can
  recurse only for <tt class="LITERAL">CHECK</tt> constraints, and
  is required to do so for such constraints.</p>

  <p>Changing any part of a system catalog table is not
  permitted.</p>

  <p>Refer to <a href="http://www.postgresql.org/docs/9.1/static/sql-createtable.html">CREATE TABLE</a> for a
  further description of valid parameters. <a href="http://www.postgresql.org/docs/9.1/static/ddl.html">Chapter 5</a> has further information on
  inheritance.</p>
</div>

<div class="REFSECT1">
  <a name="AEN62513" id="AEN62513"></a>

  <h2>Examples</h2>

  <p>To add a column of type <tt class="TYPE">varchar</tt> to a
  table:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ADD COLUMN address varchar(30);
</pre>

  <p>To drop a column from a table:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors DROP COLUMN address RESTRICT;
</pre>

  <p>To change the types of two existing columns in one
  operation:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors
    ALTER COLUMN address TYPE varchar(80),
    ALTER COLUMN name TYPE varchar(100);
</pre>

  <p>To change an integer column containing UNIX timestamps to
  <tt class="TYPE">timestamp with time zone</tt> via a <tt class="LITERAL">USING</tt> clause:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE foo
    ALTER COLUMN foo_timestamp SET DATA TYPE timestamp with time zone
    USING
        timestamp with time zone 'epoch' + foo_timestamp * interval '1 second';
</pre>

  <p>The same, when the column has a default expression that won't
  automatically cast to the new data type:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE foo
    ALTER COLUMN foo_timestamp DROP DEFAULT,
    ALTER COLUMN foo_timestamp TYPE timestamp with time zone
    USING
        timestamp with time zone 'epoch' + foo_timestamp * interval '1 second',
    ALTER COLUMN foo_timestamp SET DEFAULT now();
</pre>

  <p>To rename an existing column:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors RENAME COLUMN address TO city;
</pre>

  <p>To rename an existing table:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors RENAME TO suppliers;
</pre>

  <p>To add a not-null constraint to a column:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ALTER COLUMN street SET NOT NULL;
</pre>

  <p>To remove a not-null constraint from a column:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ALTER COLUMN street DROP NOT NULL;
</pre>

  <p>To add a check constraint to a table and all its children:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ADD CONSTRAINT zipchk CHECK (char_length(zipcode) = 5);
</pre>

  <p>To remove a check constraint from a table and all its
  children:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors DROP CONSTRAINT zipchk;
</pre>

  <p>To remove a check constraint from one table only:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE ONLY distributors DROP CONSTRAINT zipchk;
</pre>

  <p>(The check constraint remains in place for any child
  tables.)</p>

  <p>To add a foreign key constraint to a table:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ADD CONSTRAINT distfk FOREIGN KEY (address) REFERENCES addresses (address) MATCH FULL;
</pre>

  <p>To add a (multicolumn) unique constraint to a table:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ADD CONSTRAINT dist_id_zipcode_key UNIQUE (dist_id, zipcode);
</pre>

  <p>To add an automatically named primary key constraint to a
  table, noting that a table can only ever have one primary
  key:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors ADD PRIMARY KEY (dist_id);
</pre>

  <p>To move a table to a different tablespace:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE distributors SET TABLESPACE fasttablespace;
</pre>

  <p>To move a table to a different schema:</p>
  <pre class="PROGRAMLISTING">ALTER TABLE myschema.distributors SET SCHEMA yourschema;
</pre>

  <p>To recreate a primary key constraint, without blocking updates
  while the index is rebuilt:</p>
  <pre class="PROGRAMLISTING">CREATE UNIQUE INDEX CONCURRENTLY dist_id_temp_idx ON distributors (dist_id);
ALTER TABLE distributors DROP CONSTRAINT distributors_pkey,
    ADD CONSTRAINT distributors_pkey PRIMARY KEY USING INDEX dist_id_temp_idx;
</pre>
</div>

<div class="REFSECT1">
  <a name="AEN62553" id="AEN62553"></a>

  <h2>Compatibility</h2>

  <p>The forms <tt class="LITERAL">ADD</tt> (without <tt class="LITERAL">USING INDEX</tt>), <tt class="LITERAL">DROP</tt>,
  <tt class="LITERAL">SET DEFAULT</tt>, and <tt class="LITERAL">SET
  DATA TYPE</tt> (without <tt class="LITERAL">USING</tt>) conform
  with the SQL standard. The other forms are <span class="PRODUCTNAME">PostgreSQL</span> extensions of the SQL standard.
  Also, the ability to specify more than one manipulation in a
  single <tt class="COMMAND">ALTER TABLE</tt> command is an
  extension.</p>

  <p><tt class="COMMAND">ALTER TABLE DROP COLUMN</tt> can be used
  to drop the only column of a table, leaving a zero-column table.
  This is an extension of SQL, which disallows zero-column
  tables.</p>
</div>

<div class="REFSECT1">
  <a name="AEN62566" id="AEN62566"></a>

  <h2>See Also</h2><a href="http://www.postgresql.org/docs/9.1/static/sql-createtable.html">CREATE TABLE</a>
</div>

<div class="NAVFOOTER">
  <hr class="c1" width="100%">

  <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody><tr>
      <td width="33%" align="left" valign="top"><a href="http://www.postgresql.org/docs/9.1/static/sql-alterserver.html" accesskey="P">Prev</a></td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.1/static/index.html" accesskey="H">Home</a></td>

      <td width="33%" align="right" valign="top"><a href="http://www.postgresql.org/docs/9.1/static/sql-altertablespace.html" accesskey="N">Next</a></td>
    </tr>

    <tr>
      <td width="33%" align="left" valign="top">ALTER SERVER</td>

      <td width="34%" align="center" valign="top"><a href="http://www.postgresql.org/docs/9.1/static/sql-commands.html" accesskey="U">Up</a></td>

      <td width="33%" align="right" valign="top">ALTER
      TABLESPACE</td>
    </tr>
  </tbody></table>
</div>

</div>

<div id="docComments">



</div>

<div id="docFooter">
    <a href="http://www.postgresql.org/about/privacypolicy">Privacy Policy</a> |
    <a href="http://www.postgresql.org/about/">About PostgreSQL</a><br>
Copyright © 1996-2015 The PostgreSQL Global Development Group
</div>
</div>
</div>


</body></html>