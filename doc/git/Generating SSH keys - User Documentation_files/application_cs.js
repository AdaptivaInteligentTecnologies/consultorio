(function(){var e,t,r,n,s;e=$("body"),window.setupSwitcher=function(){return $("body").addClass("platform-switch"),$("body").addClass(-1!==navigator.appVersion.indexOf("Win")?"platform-windows":-1!==navigator.appVersion.indexOf("Mac")?"platform-mac":-1!==navigator.appVersion.indexOf("Linux")?"platform-linux":"platform-all")},r="platform-",s=["mac","windows","linux","all"],t=function(e){return r+e},n=$(s).map(function(e,r){return t(r)}),window.updateArticlePlatform=function(t){var s;return s=r+t,$(n).each(function(t,r){var n;return r===s?e.addClass(r):e.removeClass(r),n=$("#article-platform-nav ."+r),r===s?n.addClass("selected"):n.removeClass("selected")})},window.initPlatformNav=function(){var e;return e=$("#article-platform-nav"),e.show(),e.find("a").click(function(){return updateArticlePlatform($(this).data("platform"))})},$(function(){var i,a,c,o,u,h;return setupSwitcher(),i=$(".article-body"),a={},h=0,$(n).each(function(e,t){return i.find("."+t).length>0?(a[t]=!0,h++):void 0}),h>0?(initPlatformNav(),$(n).each(function(e,r){return r===t("all")||a[r]?void 0:$("#article-platform-nav li."+r).hide()}),c="all",e=$("body"),u=location.hash.indexOf(r),u>=0?(o=u+r.length,c=location.hash.substring(o)):e.hasClass(t("all"))||$(s).each(function(r,n){return e.hasClass(t(n))?c=n:void 0}),updateArticlePlatform(c)):void 0}),$(function(){var e;return $("ol img").each(function(e,t){return $(t).parent().prepend(t)}),$(document).on("click","ol img",function(t){var r,n;return e(),n=$(t.currentTarget).clone(),r=$('<div class="js-full-image full-image"><span class="octicon octicon-x"></span></div>').prepend(n),$(this).closest("li").append(r),$(document).on("click",".js-full-image",function(){return e(),!1})}),e=function(){return $(document).off("click",".js-full-image",e),$(".js-full-image").remove()}}),e=$("body"),window.setupHelper=function(){return $(".helper").addClass("closed"),$(".helper div.content").hide(),$(".helper h4.header a").click(function(){var e;return e=$(this).parent().parent(),e.toggleClass("closed"),e.find("div.content").slideToggle(200),!1})},$(function(){return setupHelper(),$(".flash").hide().slideDown().delay(2e3).slideUp(),$(".js-helper div.content").hide(),$(".js-helper").addClass("closed"),$(".js-helper h4.header a").click(function(){return $(this).parent().parent().children("div.content").slideToggle(),$(this).parent().parent().toggleClass("open closed"),!1})}),function(e){var t,r;return r=function(e){var t,r;return r=void 0,t=Array.prototype.slice,function(){var n,s;n=t.call(arguments),s=this,clearTimeout(r),r=setTimeout(function(){e.apply(s,n)},100)}},t=function(t,r){return this.search_elem=t,this.quickSearchResults=e(r.quickSearchResults),this.quickSearchEntries=e(r.quickSearchEntries,this.quickSearchResults),this.searchResults=e(r.searchResults),this.searchEntries=e(r.searchEntries,this.searchResults),this.indexDataUrl=r.indexUrl,this.quickSearchTemplate=this.compileTemplate(e(r.quickSearchTemplate)),this.searchTemplate=this.compileTemplate(e(r.searchTemplate)),this.searchMoreButton=e(".search-more-button"),this.searchSpinner=e(".search-spinner"),this.searchHeader=e(".search-header"),this.searchWorker=new Worker("/assets/javascripts/search_worker.js"),this.loadIndexData(function(e){return function(t){return t.type={index:!0},e.searchWorker.postMessage(t)}}(this)),this.bindQuicksearchKeypress(),this.bindQuicksearchBlur(),this.bindQuicksearchFocus(),this.searchWorker.addEventListener("message",function(e){return function(t){return t.data.type.indexed?e.populateSearchFromQuery():t.data.type.quicksearch?e.displayQuicksearch(t.data.query,t.data.results):e.displaySearchResults(t.data.query,t.data.results)}}(this)),this.searchMoreButton.on("click",function(e){return function(t){return null!=e.page?e.page++:e.page=2,e.populateEntries(),t.preventDefault()}}(this))},t.prototype.compileTemplate=function(e){var t;return t=e.text(),Mustache.parse(t,"{{ }}"),function(e,r){return Mustache.render(t,e,r)}},t.prototype.loadIndexData=function(t){return e.getJSON(this.indexDataUrl,t)},t.prototype.bindQuicksearchKeypress=function(){var e;return e=this.search_elem.val(),this.search_elem.bind("keyup",r(function(t){return function(){var r;return r=t.search_elem.val(),r!==e&&t.search(r,!0),e=r}}(this)))},t.prototype.bindQuicksearchFocus=function(){return this.search_elem.bind("focus",r(function(e){return function(){return e.search_elem.val()?e.quickSearchResults.show():void 0}}(this)))},t.prototype.bindQuicksearchBlur=function(){return this.search_elem.bind("blur",r(function(e){return function(){return e.quickSearchResults.hide()}}(this)))},t.prototype.bindQuicksearchMousedown=function(){return e(".autocomplete-results a").each(function(t,r){return e(r).bind("mousedown",function(e){e.preventDefault()})})},t.prototype.search=function(e,t){return this.searchWorker.postMessage({query:e,quicksearch:t,isSearchPage:this.isSearchPage(),type:{search:!0}})},t.prototype.displayQuicksearch=function(t,r){var n;return this.quickSearchEntries.empty(),r.length>0?(r=r.slice(0,10),this.quickSearchEntries.append(this.quickSearchTemplate({entries:r})),this.quickSearchResults.show(),n=e(".quicksearch-seemore").attr("href"),e(".quicksearch-seemore").attr("href",""+n+t),this.bindQuicksearchMousedown()):void 0},t.prototype.displaySearchResults=function(t,r){return this.searchEntries.empty(),e(".search-query").text(t),0===r.length?(this.searchSpinner.addClass("hidden"),this.searchHeader.text("No results for '"+t+"'")):(this.entries=r,this.searchSpinner.addClass("hidden"),this.searchMoreButton.removeClass("hidden"),this.searchHeader.text("Search results for '"+t+"'"),this.populateEntries())},t.prototype.populateEntries=function(){var e,t;return t=50*(this.page||1),e=this.entries.slice(t-50,t-1),this.entries.length<t&&this.searchMoreButton.addClass("hidden"),this.searchEntries.append(this.searchTemplate({entries:e}))},t.prototype.populateSearchFromQuery=function(){var e,t;if(this.isSearchPage())return(e=window.location.search.match(/[?&]q=([^&]+)/))?(t=decodeURIComponent(e[1].replace(/\+/g," ")),this.search_elem.val(t),this.search(t,!1)):this.search(" ",!1)},t.prototype.isSearchPage=function(){return window.location.pathname.match(/\/search(?:\/|$)/)},e.fn.lunrSearch=function(r){return r=e.extend({},e.fn.lunrSearch.defaults,r),new t(this,r),this}}(jQuery),$(function(){return $(document).on("click",".js-dropdown-button",function(e){return e.preventDefault(),$(".fullscreen-overlay").show(),$(this).next(".js-dropdown-menu").show()}),$(document).on("click",".fullscreen-overlay",function(){return $(".js-dropdown-menu").hide(),$(this).hide()})})}).call(this);